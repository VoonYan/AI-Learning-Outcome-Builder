{% extends "base_main.html" %}

<!--
  Template: Create a New Unit
  Purpose: Collect core fields to create a unit (code, name, level, credit points, description).
-->

{% block title %}Create a New Unit{% endblock %}
{% block banner_title %}Create a New Unit{% endblock %}
{% block banner_subtitle %}
<div class="text-center">
Fill in unit details below to create a new entry
</div>
{% endblock %}

{% block content %}
<!-- Main Content -->
    <main class="flex-grow-1">
        <div class="container my-4">

            <!-- Error Messages -->
            {% with messages = get_flashed_messages(category_filter=["error"]) %}
            {% if messages %}
            {% for message in messages %}
            <div class="alert alert-danger" role="alert">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>{{ message }}
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}

            <!-- Unit Form Card -->
            <section class="card border-warning border-2 shadow-sm mb-4">
                <div class="card-body">
                    <h3 class="h5 text-black border-bottom border-warning pb-2 mb-4 d-flex align-items-center">
                        <i class="bi bi-pencil-square me-2"></i>Unit Details
                    </h3>

                    <!-- Form: posts to /new_unit; novalidate disables native browser validation -->
                    <form method="POST" action="{{ url_for('main.new_unit') }}" novalidate>
                        {{ form.hidden_tag() }}

                        <!-- Unit Code -->
                        <div class="mb-3">
                            {{ form.unitcode.label(class="form-label") }}
                            {{ form.unitcode(class="form-control", size=32) }}
                            {% for error in form.unitcode.errors %}
                            <div class="alert alert-danger mt-1">{{ error }}</div>
                            {% endfor %}
                        </div>

                        <!-- Unit Name -->
                        <div class="mb-3">
                            {{ form.unitname.label(class="form-label") }}
                            {{ form.unitname(class="form-control", size=32) }}
                            {% for error in form.unitname.errors %}
                            <div class="alert alert-danger mt-1">{{ error }}</div>
                            {% endfor %}
                        </div>

                        <!-- Level (select) -->
                        <div class="mb-3">
                            {{ form.level.label(class="form-label") }}
                            {{ form.level(class="form-control") }}
                        </div>

                        <!-- Credit Points (select) -->
                        <div class="mb-3">
                            {{ form.creditpoints.label(class="form-label") }}
                            {{ form.creditpoints(class="form-select") }}
                        </div>

                        <!-- Description -->
                        <div class="mb-3">
                            {{ form.description.label(class="form-label") }}
                            {{ form.description(class="form-control", rows=4) }}
                        </div>

                        <!-- Submit -->
                        <div class="text-center">
                            {{ form.submit(class="btn btn-warning text-dark px-4") }}
                        </div>
                    </form>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer year -->
    <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    </script>

{% endblock %}
